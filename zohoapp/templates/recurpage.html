{% extends 'base.html' %}
{% load static %}
{% block content %}
<style>
    td{
        color: white;
    }
    tr{
        color: white;
    }
</style>
<section>
    <div class="fixed-top  " style="top: 7rem; margin-left: 20rem;">


        <div class="row  ml-2">
            <div class="col-md-3 "><a class="text-white" style="font-size: 1.5rem;">New Recurring Invoice</a></div>
        </div>

        <div style="height: 600px; overflow-y: scroll;">
            <form action="{% url 'new_recur' %}" method="post">
                {% csrf_token %}
                <div class="row mb-4 border-top pt-5">
                    <div class="col-sm-2"><label for="customer_name" style="margin-left: 10px;">Customer Name*</label></div>
                    <div class="col-sm-10">
                        <select class="option" name="customer">
              
                            <option disabled="disabled" selected="selected">--Choose option--</option>
                            {% for c in cus %}
                              <option value="{{c.id}}">{{c.customerName}}</option>
                            {% endfor %}
                          </select>
                        
                    </div>
                    <div class="row mb-4 pt-3">
                        <div class="col-sm-2"><label for="customer_name" style="margin-left: 10px;">Place Of Supply*</label></div>
                        <div class="col-sm-10">
                            <select name="supply">
                                    <option value="value" selected>--Choose option--</option>
                                    <option value="[AN]-Andaman And Nicobar Islands">[AN]-Andaman And Nicobar Islands</option>
                                    <option value="[AD]-Andhra Pradesh">[AD]-Andhra Pradesh</option>
                                    <option value="[AR]-Arunachal Pradesh">[AR]-Arunachal Pradesh </option>
                                    <option value="[AS]-Assam">[AS]-Assam</option>
                                    <option value="[BR]-Bihar">[BR]-Bihar</option>
                                    <option value="[CH]-Chandhigarh">[CH]- Chandhigarh</option>
                                    <option value="[CG]-Chattisgarh">[CG]- Chattisgarh</option>
                                    <option value="[DD]-Daman Diu">[DD]- Daman Diu</option>
                                    <option value="[DL]- Delhi">[DL]- Delhi</option>
                                    <option value="[GA]-Goa">[GA]-Goa</option>
                                    <option value="[GJ]-Gujarat">[GJ]-Gujarat</option>
                                    <option value="[HR]-Haryana">[HR]-Haryana</option>
                                    <option value="[HP]-Himachal Pradesh">[HP]-Himachal Pradesh</option>
                                    <option value="[JK]-Jammu And Kashmir">[JK]- Jammu And Kashmir</option>
                                    <option value="[JH]-Jharkand">[JH]-Jharkand</option>
                                    <option value="[KA]-Karnataka">[KA]-Karnataka</option>
                                    <option value="[KL]-Kerala">[KL]-Kerala</option>
                                    <option value="[LA]-Ladakh">[LA]-Ladakh</option>
                                    <option value="[LD]-Lakshadweep">[LD]-Lakshadweep</option>
                                    <option value="[MP]-Madhyapradesh">[MP]-Madhyapradesh</option>
                                    <option value="[MH]-Maharashtra">[MH]-Maharashtra</option>
                                    <option value="[MN]-Manipur">[MN]-Manipur</option>
                                    <option value="[ML]-Meghalaya">[ML]-Meghalaya</option>
                                    <option value="[MZ]-Mizoram">[MZ]-Mizoram</option>
                                    <option value="[NL]-Nagaland">[NL]-Nagaland</option>
                                    <option value="[NL]-Nagaland">[NL]-Nagaland</option>
                                    <option value="[OD]-Odisha">[OD]-Odisha</option>
                                    <option value="[PY]-Puducherry">[PY]-Puducherry</option>
                                    <option value="[PB]-Punjab">[PB]-Punjab.</option>
                                    <option value="[RL]-Rajasthan">[RL]-Rajasthan</option>
                                    <option value="[SK]-Sikkim">[SK]-Sikkim</option>
                                    <option value="[TN]-Tamilnadu">[TN]-Tamilnadu</option>
                                    <option value="[TS]-Telenghana">[TS]-Telenghana</option>
                                    <option value="[TR]-Tripura">[TR]-Tripura</option>
                                    <option value="[UP]-Uttar Pradesh">[UP]-Uttar Pradesh</option>
                                    <option value="[UK]-Utharakhand">[UK]-Utharakhand</option>
                                    <option value="[WB]-West Bengal">[WB]-West Bengal</option>
                                    <option value="[OT]-Other Territory">[OT]-Other Territory</option>
                            </select>
                        </div>
                        <div class="row mb-4 pt-3">
                            <div class="col-sm-2"><label for="estimate_number" style="margin-left: 10px;">Entry Type</label></div>
                            <div class="col-sm-10"><input type="radio" name="type" class="custom-radio"  value="invoice">&nbsp;&nbsp;<label>Invoice</label>&nbsp;&nbsp;&nbsp;&nbsp;
                              <input type="radio" name="type" class="custom-radio" value="bill" >&nbsp;&nbsp;<label>Bill of Supply</label>
                        </div>
                        </div>
                        <div class="row mb-4  pt-3">
                            <div class="col-sm-2"><label for="customer_name" style="margin-left: 10px;">Profile Name*</label></div>
                            <div class="col-sm-10">
                                <input type="text" name="name" style="width: 50%; height: 35px;">
                            </div>
                        </div>
                        <div class="row mb-4  pt-3">
                            <div class="col-sm-2"><label for="customer_name" style="margin-left: 10px;">Order Number</label></div>
                            <div class="col-sm-10">
                                <input type="text" name="order" style="width: 50%; height: 35px;">
                            </div>
                        </div>
                        <div class="row mb-4  pt-3">
                            <div class="col-sm-2"><label for="customer_name" style="margin-left: 10px;">Repeat Every *</label></div>
                            <div class="col-sm-10">
                               <select style="width: 50%; height: 35px;" name="every">
                                <option value="2 weeks">2 Weeks</option>
                                <option value="3 months">3 Months</option>
                                <option value="2 years">2 Years</option>
                               </select>
                            </div>
                        </div>
                        <div class="row mb-4  pt-3">
                            <div class="col-sm-2"><label for="customer_name" style="margin-left: 10px;">Start On</label></div>
                            <div class="col-sm-10">
                                <input type="date" name="start" style="width: 50%; height: 35px;">
                            </div>
                        </div>
                        <div class="row mb-4 pt-3">
                            <div class="col-sm-2"><label for="customer_name" style="margin-left: 10px;">Ends On</label></div>
                            <div class="col-sm-10">
                                <input type="date" name="end" style="width: 50%; height: 35px;">
                            </div>
                        </div>
                        <div class="row mb-4  pt-3">
                            <div class="col-sm-2"><label for="customer_name" style="margin-left: 10px;">Payment Terms</label></div>
                            <div class="col-sm-10">
                               <select style="width: 50%; height: 35px;" name="terms">
                                <option value="Net 60">Net 60</option>
                                <option value="Net 45">Net 45</option>
                                <option value="Net 30">Net 30</option>
                                <option value="modal-1" data-toggle="modal" data-target="#exampleModal">Configure</option>
                            </select>
                            </div>
                        </div>
                <div style="margin-left: 10px;">
                    <table class="table table-bordered">
                        <thead>
                          <tr>
                            <th scope="col">Items Details</th>
                            <th scope="col">Quantity</th>
                            <th scope="col">Rate</th>
                            <th scope="col">Discount</th>
                            <th scope="col">Amount</th>
                          </tr>
                        </thead>
                        <tbody>
                            {% for item in item %}
                          <tr>
                            <td><input type="text" class="form-control" name='iname[]' value="{{item.Name}}"></td>
                            <td><input type="number" class="form-control" name='qua[]' value="0.0"></td>
                            <td><input type="number" class="form-control" name='rate]' value="{{item.s_price}}"></td>
                            <td><input type="number" class="form-control" name='am[]' value="0.0"></td>
                            <td><input type="number" class="form-control" name='am[]' value="0.0"></td>
                            <td class='text-center'><button type='button' id='del_btn1'
                                class='btn btn-transparent text-danger btn-sm btn-outline-danger rounded-circle delete-row'
                                style='width:30px'><i class='fa fa-times'></i></button></td>
                          </tr>
                          {% endfor %}
                        </tbody>
                      </table>
                      <button type="button" class="btn btn-success  text-white" style="background-color: rgb(6, 122, 6) ;"
            id="add-row">Add Row</button>
      
        <div class="row border-bottom pb-5">
            <div class="col-sm-6 d-flex flex-column my-auto">
      
                <label for="">Customer Notes</label>
                <textarea name="customer_note" id="" cols="8" rows="8"
                    placeholder=" Customer information for future Buisness"></textarea>
            </div>
            <div class="col-sm-6">
                <table class="rounded table  text-white" style="background-color: rgba(51, 50, 48, 0.8);">
                    <tr>
                        <td>Sub Total</td>
                        <td></td>
                        <td><input type="number" id="subtotal" name="subtotal" value="0.00"
                                class="form-control border-0 text-right" readonly></td>
                    </tr>
                    <tr id="tr_igst" >
                        <td>IGST</td>
                        <td></td>
                        <td><input type="number" id='igst' name="igst" value="0.00"
                                class="form-control border-0 text-right" readonly></td>
                    </tr>
                    <tr   id="tr_cgst">
                        <td>CGST</td>
                        <td></td>
                        <td><input type="number" id='cgst' name="cgst" value="0.00"
                                class="form-control border-0 text-right cgst" readonly></td>
                    </tr>
                    <tr  id="tr_sgst">
                        <td>SGST</td>
                        <td></td>
                        <td><input type="number" id='sgst' name="sgst" value="0.00"
                                class="form-control border-0 text-right" readonly></td>
                    </tr>
                    <tr>
                        <td>Tax Amount</td>
                        <td></td>
                        <td><input type="number" id="total_taxamount" name="totaltax" value="0.00"
                                class="form-control border-0 text-right"readonly></td>
                    </tr>
                   
                   
                    <tr>
                        <th>Total (&#x20B9;)</th>
                        <th></th>
                        <th><input type="number" id="total_with_tax" name="t_total" value="0.00"
                                class=" form-control border-0 text-right"readonly></b></th>
                    </tr>
                </table>
            </div>
        </div>
      
        <div class="row ">
            <div class="col-md-8 d-flex flex-column w-60 m text-black">
                <label for="">Terms & Conditions</label>
                <textarea name="ter_cond" id="" cols="20" rows="5"
                    placeholder=" Enter the terms & conditions ."></textarea>
            </div>
           
        </div>
      
      
      
        <div class="" style="margin-bottom: 20rem;">
            
            <button type="submit" name="sd" class="btn btn-warning text-white" 
                value="Save">Save</button>
            <input class="btn btn-danger text-white"
                type="reset">
        </div>
                </div>
                    
            </form>
        </div>
    </div>
</section>












<!-- payment modal -->
      



      <!-- <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Payment Terms</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
                <form id="terms-form" action="{% url 'payment_term' %}" method="post">
                    {% csrf_token %}
                    <div id="terms-container">
                      <div class="form-row">
        
                    <div class="col-6">
                      <input type="text" name="terms[]" class="form-control" placeholder="Terms">
                    </div>
                    <div class="col-5">
                      <input type="text" name="days[]" class="form-control" placeholder="No of Days">
                    </div>
                    <div class="col-1">
                      <button type="button" class="btn btn-success add-term-row">+</button>
                    </div>
                  </div>
                </div>
                <div class="form-row mt-3">
                  <div class="col-12 text-right">
                    <input type="submit" class="btn btn-success" value="submit">
                  </div>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary">Save changes</button>
            </div>
          </div>
        </div>
      </div>




      <script>
     
        // Select the form and the container for the terms rows
      const form = document.getElementById('terms-form');
      const termsContainer = document.getElementById('terms-container');
      
      // Select the button that adds new rows
      const addTermRowBtn = document.querySelector('.add-term-row');
      
      // Add event listener to the button
      addTermRowBtn.addEventListener('click', () => {
        // Create a new row div
        const newRow = document.createElement('div');
        newRow.classList.add('form-row');
      
        // Create the first input field for the new row
        const termsInput = document.createElement('div');
        termsInput.classList.add('col-6');
        const termsField = document.createElement('input');
        termsField.type = 'text';
        termsField.name = 'terms[]';
        termsField.placeholder = 'Terms';
        termsField.classList.add('form-control');
        termsInput.appendChild(termsField);
        newRow.appendChild(termsInput);
      
        // Create the second input field for the new row
        const daysInput = document.createElement('div');
        daysInput.classList.add('col-5');
        const daysField = document.createElement('input');
        daysField.type = 'text';
        daysField.name = 'days[]';
        daysField.placeholder = 'No of Days';
        daysField.classList.add('form-control');
        daysInput.appendChild(daysField);
        newRow.appendChild(daysInput);
      
        // Create the delete button for the new row
        const deleteBtn = document.createElement('div');
        deleteBtn.classList.add('col-1');
        const deleteBtnEl = document.createElement('button');
        deleteBtnEl.type = 'button';
        deleteBtnEl.classList.add('btn', 'btn-danger', 'delete-term-row');
        deleteBtnEl.innerText = '-';
        deleteBtn.appendChild(deleteBtnEl);
        newRow.appendChild(deleteBtn);
      
        // Append the new row to the container
        termsContainer.appendChild(newRow);
      });
      
      // Add event listener to the form to delete rows
      form.addEventListener('click', (event) => {
        // If the target element is a delete button
        if (event.target.classList.contains('delete-term-row')) {
          // Find the row to delete
          const row = event.target.closest('.form-row');
          // Remove the row
          row.remove();
        }
      });
      
      
      
       </script> -->
{% endblock %}